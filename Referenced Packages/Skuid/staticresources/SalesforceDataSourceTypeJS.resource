!function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=316)}({316:function(e,t,a){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t,a=e.constants,n=a.DISPLAY_TYPES,o=a.LIGHTNING,i=n.REFERENCE,s=a.SALESFORCE,c=a.VISUALFORCE,d=n.MULTIPICKLIST,l=n.TEXT,u=n.BOOLEAN,f=n.PICKLIST,p="x-salesforce-save-api-version",m=2,h="Could not upload file",g="_failedToGetRecordTypeMetadata",y="_recordTypeIdsAlreadyFetching",v=e.$,b=e.utils,S=b.inPlatform,C=b.toArray,I=e.dataSource.utils,R=b.mergeAsTextInContext,N=b.isString,T=e.sfdc,F=b.makeXMLDoc,A=b.getInvokable,w=b.encodeHTML,j=b.resolve,M=b.startsWith,E=T.api.version,P={},_={Case:"CaseNumber",ContentDocument:"Title",ContentVersion:"Title",CustomPermission:"MasterLabel",Event:"Subject",FeedItem:"Title",Idea:"Title",PartnerNetworkConnection:"ConnectionName",Solution:"SolutionName",Task:"Subject",WorkOrder:"WorkOrderNumber"},x={CampaignMember:1,AccountContactRole:1,OpportunityContactRole:1,ContractContactRole:1,CaseContactRole:1,CaseComment:1,CaseSolution:1,OpportunityLineItem:1},k=1;function O(e){if(!e)return!0;if(S([c,o])){if("string"==typeof e)return e===s;if("object"===(void 0===e?"undefined":r(e)))return e.name===s}return!1}function L(e){return O(e.getDataSource())}function D(){return!(!window.sforce||!sforce.one)&&sforce.one}function U(e,t){return b.getWindowLocation().href.indexOf("/lightning/")>-1?"/lightning/r/"+t+"/"+e+"/view":"#/sObject/"+e+"/view"}function V(e){e.element.off("click.skuidLinkHandler")}function B(e,t){e.element.on("click.skuidLinkHandler","a",function(e){e.metaKey||(e.preventDefault(),t())})}function q(e,t){B(e,function(){window.$A.get("e.force:navigateToSObject").setParams({recordId:t}).fire()})}function H(e,t){B(e,function(){sforce.one.navigateToSObject(t)})}function J(){return S(o)&&!!window.$A}function W(e,t){var a,r,n,o=e.metadata.controllingField,i=e.model,s=o&&i.getField(o),c=e.metadata.picklistEntries,d=[];return o&&s?(r=i.getFieldValue(e.row,o,!0),t&&t.length&&(a={},v.each(t,function(){a[this.value]=1})),"BOOLEAN"===s.displaytype?n=r?1:0:v.each(s.picklistEntries,function(e,t){t.value===r&&(n=e)}),(n||0===n)&&c&&v.each(c,function(e,t){var r,o;r=n,o=t.validFor,0!=(new sforce.Base64Binary("").decode(o).charCodeAt(r>>3)&128>>r%8)&&(!a||t.value in a)&&d.push(t)}),d):t||c}function G(e){var t=e.model,a=t.objectName,r=e.item,n=e.metadata,o=n.picklistEntries||[],i=r&&r.ValidRecordTypeIds?r.ValidRecordTypeIds:[],s=t.getFieldValue(e.row,"RecordTypeId",!0);return n.overrideMetadata&&o.length&&n.customPicklistEntriesProvided?I.deferrable(o):(s&&-1===v.inArray(s,i)&&i.push(s),i.length?Ae(a,e.id,i,t).then(function(t){return t||(t=e.picklistEntries||e.metadata.picklistEntries),W(e,t)}):I.deferrable(W(e)))}function z(){return!!(window.sforce&&window.sforce.console&&window.sforce.console.isInConsole())&&window.sforce.console}function Y(e){for(;N(e);)try{e=JSON.parse(e)}catch(e){break}return e}function $(e){var t=e.split(".")[0];return b.endsWith(t,"__r")||b.endsWith(t,"__pr")?t.substring(0,t.length-1)+"c":t+"Id"}function K(e){return b.endsWith(e,"__c")||b.endsWith(e,"__pc")?e.substring(0,e.length-1)+"r":e.substring(0,e.length-2)}function X(e){if(e&&e.fields&&e.fields.length){var t=e.getDataSource&&e.getDataSource(),a=t&&t.getCachedEntityMetadata(e.objectName);v.each(e.fields,function(t,r){!function e(t,a,r,o){if(a){var s,c,d,l,u,f,p=a.split("."),m=o.getDataSource&&o.getDataSource();if("childRelationship"===t.type)(l=t.referenceTo&&t.referenceTo.length&&t.referenceTo[0])&&(u=m&&m.getCachedEntityMetadata(l.o),(f=t.subFields)&&v.each(f,function(t,a){e(a,a.id,u,o)}));else if(1===p.length){if(s=r&&r.getField&&r.getField(a)){c=o.getOverrideableFieldMetadata(t);var h=t.id,g=t.name;v.extend(!0,t,s),h&&(t.id=h),g&&(t.name=g),c&&v.each(c,function(e,a){t[e]=a})}if(t&&t.function){var y,b,S=t.function;S&&(y=["CALENDAR_MONTH","CALENDAR_QUARTER","CALENDAR_YEAR","DAY_IN_MONTH","DAY_IN_WEEK","DAY_IN_YEAR","FISCAL_MONTH","FISCAL_QUARTER","FISCAL_YEAR","HOUR_IN_DAY","WEEK_IN_MONTH","WEEK_IN_YEAR"],b=["DAY_ONLY"],0===(S=S.toUpperCase()).lastIndexOf("COUNT",0)?t.displaytype=n.INTEGER:t.displaytype!==n.DATE&&t.displaytype!==n.DATETIME||-1===y.indexOf(S)?t.displaytype==n.DATETIME&&-1!==b.indexOf(S)&&(t.displaytype=n.DATE):t.displaytype=n.STRING,t.required=t.createable=t.editable=!1)}var C,I,R,N;t&&t.displaytype===i&&(t.relationshipName||(t.relationshipName=t.rel),!t.ref&&t.referenceTo&&(C=t.referenceTo)&&C.length&&(I=[],R=[],N={c:"createable",o:"objectName",l:"label",k:"keyPrefix",p:"labelPlural",s:"searchable"},v.each(C,function(e,t){t.o&&(I.push(t.o),R.push(t.k),v.each(N,function(e,a){t[a]=t[e],delete t[e]}),t.accessible=!0)}),I.length&&(t.ref=I.join(",")),R.length&&(t.refprefix=R.join(","))))}else a=$(a=p.shift()),(s=r&&a&&r.getField&&r.getField(a))&&((d=s.referenceTo)&&1===d.length?r=m&&m.getCachedEntityMetadata(d[0].objectName||d[0].o):d&&d.length>1&&(r=m&&m.getCachedEntityMetadata("Name")),r&&e(t,p.join("."),r,o)),t.required=t.createable=t.editable=!1}}(r,r.id,a,e)})}return e}function Q(e){if(!e)return"";var t=e.statusCode,a=e.body,r=t&&e.status?t+" "+e.status+": ":"";return(a=Y(a))instanceof Array&&1===a.length?r+=a[0].message:a&&a.message?r+=a.message:e.error&&(r+=e.error),r}function Z(t){var r=b.combineUrls(t.serviceUrl,"/services/apexrest/skuid/api/v1/");return t._sfdcRemote=[{name:"load",pathName:"models"},{name:"save",pathName:"models"},{name:"getModelMetadata",pathName:"models"},{name:"getEntityList",pathName:"models"},{name:"doSearch",pathName:"models"},{name:"checkMetadataApiAccess",pathName:"models"},{name:"approvalsProcessWorkItem",pathName:"approvals"},{name:"approvalsUnlockRecord",pathName:"approvals"}].reduce(function(n,o){return n[o.name]=function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"models";return function(i){var c,d,l,u=v.Deferred(),f=i&&!N(i)?JSON.stringify(i):i||null,p=0;return t.name===s?(l=[],f&&l.push(f),l.push(function(a,r){var o;if(r.status){if(N(a))try{a=JSON.parse(a)}catch(e){}u.resolve(a)}else o=r.message,e.platform.isPlatformSessionError(o,t)?e.platform.attemptLogin(p).then(function(){p++,e.remote()[n].apply(window,l)}).catch(function(){u.reject(o)}):u.reject(o)},{escape:!1}),e.remote()[n].apply(window,l)):(d={method:c=f?"POST":"GET",url:r+o,headers:{"x-skuid-rest-service-method":n,"X-SKUID-REST-SERVICE-METHOD":n}},"POST"===c&&(d.body=f,d.contentType="application/json"),t.makeRequest(t.createHTTPRequest(d)).then(function(e){var t=e.body,r=e.statusCode;e.error?u.reject(e.error):t&&(t=Y(t),v.inArray(r,[200,201,204])<0?u.reject(Q(e)):t&&t.error&&1===b.size(t)?"Invalid Skuid Model API request method: null"===t.error&&S(a.NATIVE)?u.reject("The version of Skuid installed in the target Salesforce org is not compatible with Skuid Platform. Please install the latest version of Skuid into this Salesforce org."):u.reject(t.error):u.resolve(t))},function(e){u.reject(Q(e))})),u.promise()}}(o.name,o.pathName),n},{})}function ee(e){var t=e._sfdcRemote;return t||(t=new Z(e)),t}function te(){return e.utils.userInfo}function ae(e){var t=e.path,a=e.basePath||"";return e.dataSource&&e.dataSource.name===s&&(a=""),e.accessToken=e.accessToken||te().sessionId,e.url=b.getSafeRelativeUrl(a+"/services/data"+t),function(e){var t,a=e.fields,r=e.file,n=e.payloadField,o=e.url,i="formboundary"+Math.random().toString(36).substr(2,10),c=e.filename||r.name,d=e.dataSource;t=new Blob(["--boundary_"+i+'\nContent-Disposition: form-data; name="entity_content";\nContent-Type: application/json\n\n'+JSON.stringify(a)+"\n\n--boundary_"+i+"\nContent-Type: "+r.type+'\nContent-Disposition: form-data; name="'+n+'"; filename="'+c+'"\n\n',r,"\n--boundary_"+i+"--"],{type:'multipart/form-data; boundary="boundary_'+i+'"'});var l=d.createHTTPRequest({url:o,headers:{},method:"POST"});return l.headers.Accept="application/json",d.name===s&&(l.headers.Authorization="Bearer "+te().sessionId),v.extend(l,{body:t,cache:!1,contentType:!!d.useProxy&&'multipart/form-data; boundary="boundary_'+i+'"',processData:!1}),b._ie&&(l.contentType='multipart/form-data; boundary="boundary_'+i+'"'),d.makeRequest(l)}(e)}function re(e,t,a,r){var n,o=[],i={errors:o},s=!0;function c(t,a){var r=e[t];if(r&&r.length===a)for(n=0;n<a;n++)r[n].success||(r[n].errors&&r[n].errors.length&&Array.prototype.push.apply(o,r[n].errors),s=!1);else s=!1}return t&&c("insertResults",t),a&&c("updateResults",a),r&&c("deleteResults",r),i.success=!o.length&&s,i}function ne(e){var t,a,r,n,o,i=v.Deferred(),c=e.paramString||"",d=e.dataSource,l=e.fileField,u=e.context;return u&&(u.id?r=u.id:u.row&&(l?(n=u.model.getField(l))&&"REFERENCE"===n.displaytype?(a=l.substr(0,l.length-1),r=b.getObjectProperty(u.row,a+"r.skuid__AttachmentId__c")):r=b.getObjectProperty(u.row,l):u.model&&("skuid__Image__c"===(t=u.model.objectName)?r=u.row.skuid__AttachmentId__c:"Attachment"===t&&(r=u.row.Id)))),r?d.name===s?i.resolve(b.getUrlFromAttachmentId(r+c)):(o=d.serviceUrl+"/services/data/v"+E+"/sobjects/Attachment/"+r+"/body",d.authenticate().then(function(){return d.makeRequest(d.createHTTPRequest({url:o,accept:"application/octet-stream"}))}).then(function(e){i.resolve("data:;base64,"+e.body)},function(e){i.reject(e)})):i.reject("No Attachment Id"),i.promise()}function oe(t,a){if(b.isString(t))return a({message:h+": "+t});a({message:e.ajax.getErrorMessage(t,h)})}function ie(t,a,r,n,i,c){var d,l,u=r.uploadMethod.dataSource,f={row:a.row,model:a.model},p={createFields:!1},m=a.options.xmlDef,h=a.row,g=m&&m.attr("owneridfield")||"",y=h&&g&&h[g]?h[g]:"",C=r.description?R(r.description,f,p):"",I=r.filename?R(r.filename,f,p):t.name,N=r.feedtext?R(r.feedtext,f,p):"";function T(e){oe(e,i)}function F(e){var a={Origin:e,PathOnClient:I,Description:C};return"contentdocumentwithrecord"===r.storeAs&&(a.FirstPublishLocationID=h.Id),ae({path:"/v"+E+"/sobjects/ContentVersion",basePath:u&&u.serviceUrl,fields:a,payloadField:"VersionData",file:t,filename:I,dataSource:u})}if(n({fileName:I}),S(o))return i({message:"Cannot upload large files in Lightning"}),!1;if("record"===r.storeAs){var A={ParentId:a.model.getRowId(a.row),Name:I,ContentType:t.type,Description:C};y&&(A.OwnerId=y),ae({path:"/v"+E+"/sobjects/Attachment",basePath:u&&u.serviceUrl,fields:A,payloadField:"Body",file:t,filename:I,dataSource:u}).then(function(e){var t=(e&&b.parseAsJSONIfString(e.response||e.body)).id;i({newFileId:t,newFileName:I})},T,function(e){c(e)})}else if("field"===r.storeAs){var w,j,M="/v"+E+"/sobjects/Attachment",P=a.fieldValue,_=!1;(function(){var e=v.Deferred();if(P)e.resolve(P);else{var t=[],r={id:"updateObject",updates:{},type:a.model.objectName},n=a.model.getRowId(a.row);r.updates[n]={},r.updates[n][a.fieldName]="1",t.push({id:"imageImageInsert",inserts:{1:{}},type:"skuid__Image__c"},r),ee(u).save(JSON.stringify({operations:t,rollbackOnAnyError:!0})).then(function(t){var a,r="";t.globalErrors&&t.globalErrors.length?r+=t.globalErrors.join(", "):t.insertResults&&1===t.insertResults.length&&t.updateResults&&1===t.updateResults.length?t.insertResults[0].success&&t.updateResults[0].success?a=t.insertResults[0].id:(v.each(t.insertResults[0].errors,function(){r+=this.message}),v.each(t.updateResults[0].errors,function(){r+=this.message})):r+="Error Uploading File",a?e.resolve(a):e.reject(r)},function(t){e.reject(t&&t.error)})}return e.promise()})().then(function(e){var r=a.fileId;j=e,r&&e&&(_=!0,M+="/"+r+"?_HttpMethod=PATCH");var n={Name:I,ContentType:t.type,Description:C};return!r&&e&&(n.ParentId=e),ae({path:M,basePath:u&&u.serviceUrl,fields:n,payloadField:"Body",file:t,filename:I,dataSource:u})}).then(function(e){var t=a.fileId,r=e&&(e.response||e.body);if(t?w=t:r&&(r=b.parseAsJSONIfString(r),w=r.id),_){var n=[],o={id:"updateObject",updates:{},type:"skuid__Image__c"};return o.updates[j]={Name:I},n.push(o),ee(u).save(JSON.stringify({operations:n,rollbackOnAnyError:!0}))}return v.when()}).then(function(){i({newFileId:w,newFileName:I,newFieldValue:j})},T,function(e){c(e)})}else"chatterfeed"===r.storeAs?(d=e.page?e.page.community:null,l=d?d.id:null,ae({path:"/v35.0"+(l?"/connect/communities/"+l:"")+"/chatter/feed-elements",basePath:u&&u.serviceUrl,fields:{body:{messageSegments:[{type:"Text",text:N}]},capabilities:{content:{description:C,title:I}},feedElementType:"FeedItem",subjectId:a.model.getRowId(a.row)},payloadField:"feedElementFileUpload",file:t,filename:I,dataSource:u})).then(function(){if(i(),window.chatter&&u.name===s){var e=chatter.getFeed(),t=e.getConfig();e.refresh({feedType:t.feedType,isFullRefresh:!0,params:t})}},T,function(e){c(e)}):"chatterfiles"===r.storeAs?F("H").then(function(){i()},T,function(e){c(e)}):"contentdocument"!==r.storeAs&&"contentdocumentwithrecord"!==r.storeAs||F("C").then(function(){i()},T,function(e){c(e)})}function se(t,a,r,n,o){var i=r.filename||t.name,c=r.uploadMethod.dataSource,d=c&&c.serviceUrl?c.serviceUrl:"",l=function(e){oe(e,o)};n({fileName:i}),b.readFileAsBase64(t).then(function(t){var a,r,n,u=i.split("."),f="";u.length>1&&(f=u.pop().toUpperCase()),a=(i=u.join("")+f).match(/[a-z]|[A-Z]|[0-9]/g),i=a?a.join(""):"unnamedResource",/[0-9]/.test(i.charAt(0))&&(i="SR"+i),(r=c.createHTTPRequest({url:d+"/services/data/v"+E+"/sobjects/StaticResource",headers:{"Content-Type":"application/json"},method:"POST"})).headers.Accept="application/json",c.name===s&&(r.headers.Authorization="Bearer "+te().sessionId),n={Name:i,ContentType:"application/"+f,Body:t,CacheControl:"Public"},v.extend(r,{body:JSON.stringify(n),contentType:"application/json"}),c.makeRequest(r).then(function(e){var t=e.body,a=t.id||t.Id;void 0!==a&&(n.Id=a),o({record:v.extend(n,e)})},function(t){var a="SELECT Id FROM StaticResource WHERE Name='"+i+"'";c.name===s?e.sfdc.api.query(a).then(function(a){if(a.records&&a.records[0]&&window.confirm('Static Resource "'+i+'" already exists, do you want to overwrite it?'))return n.Id=a.records[0].Id,new e.sfdc.api.SObject("StaticResource",n).update();return v.Deferred().reject(t).promise()}).then(function(){o({record:n})},function(e){l(e)}):l(t)})})}function ce(e){return e&&e in _?_[e]:e in x||e&&b.endsWith(e,"__x")?"Id":"Name"}function de(){return"Id"}function le(t,a){var r,o={Case:["UseActiveAssignmentRule","SendAutoResponseEmails","SendUserNotificationEmails","AllowExternalEmails"],CaseComment:["AllowExternalEmails"],Event:["SendUserNotificationEmails","AllowExternalEmails"],Lead:["UseActiveAssignmentRule","SendAutoResponseEmails","SendUserNotificationEmails","AssignmentRuleId"],Task:["SendUserNotificationEmails"],User:["SendUserNotificationEmails"]};if(t&&t.operations)return a||(a=m),t.operations.forEach(function(t){var a=o[t.type],r=e.$M(t.id);["inserts","updates","changes"].forEach(function(e){t[e]&&v.each(t[e],function(t,o){if(v.each(o,function(a,i){if((b.endsWith(a,"__r")||b.endsWith(a,"__pr"))&&delete o[a],r){var s,c,d,l=r?r.getField(a):null,u=v.isArray(i),f=v.isPlainObject(i);if("changes"===e?(s=!!(d=r.getRecordById(t))&&d.isNew(),c=!!d&&(!d.isNew()&&!d.isMoribund())):(s="inserts"===e,c="updates"===e),l){if(s&&!l.createable||c&&!l.editable)return delete o[a],!0;if(f&&l.displaytype===n.OBJECT||u&&l.displaytype===n.ARRAY)return o[a]=JSON.stringify(i),!0}(u||f)&&delete o[a]}}),r&&a){var i=r.changes[t];v.each(a,function(e,t){i.hasOwnProperty(t)&&(o[t]=i[t])})}})})}),a<2?{operations:(r=t).operations.map(function(e){var t={updates:e.returning.map(function(e){return{id:e}}),changes:{},id:e.id,type:e.type};return e.inserts&&v.each(e.inserts,function(e,a){t.changes[e]=a}),e.updates&&v.each(e.updates,function(e,a){t.changes[e]=a}),e.deletes&&v.each(e.deletes,function(e){t.changes[e]={__deleted:!0}}),t}),rollbackOnAnyError:r.rollbackOnAnyError}:t}function ue(e,t,a){var r=t+a,n=e[y]=e[y]||{},o=n[r];return o||(n[r]=function(e,t,a){if("Task"===t||"Event"===t)return b.reject();return fe("/ui-api/object-info/"+t+"/picklist-values/"+a,e,"GET",function(){}).then(function(e){return t=e.picklistFieldValues,a={},v.each(t,function(e,t){var r=b.grab(t,"defaultValue","value");a[e]=v.map(t.values,function(e){return{value:e.value,label:e.label,defaultValue:r&&r===e.value}})}),a;var t,a})}(e,t,a).then(function(e){if(!b.size(e))throw new Error("Failed to fetch - on platform");return delete n[r],e}).catch(function(){var o=r+"sobject";return n[o]?n[o]:n[o]=function(e,t,a){return fe("/sobjects/"+t+"/describe/layouts/"+a,e,"GET",function(){}).then(function(e){return a={},(t=e).detailLayoutSections&&t.detailLayoutSections.forEach(function(e){e.layoutRows&&e.layoutRows.forEach(function(e){e.layoutItems&&e.layoutItems.forEach(function(e){e.layoutComponents&&e.layoutComponents.forEach(function(e){var t=b.grab(e,"details","type");t&&(t.indexOf("picklist")>-1||"combobox"===t)&&(a[e.details.name]=e.details.picklistValues)})})})}),a;var t,a})}(e,t,a).then(function(e){return delete n[r],delete n[o],e}).catch(function(){delete n[r],delete n[o],e[g]=!0})}))}function fe(t,a,r,n){var o={type:r=r||"GET",url:t,cache:"GET"===r,dataSource:a,error:n};return e.sfdc.api.makeRequest(o)}var pe=function(t,a){a&&a.addProblem?a.addProblem(t):e.component.getByType("skuidpage")[0].addProblem(t)},me=function(e,t){var a=(t=t||{}).needSObject,r=t.isStandard,n=t.sobject,o=t.actionName;return r&&!o&&(o=e),o=o||"",r?"/actions/standard/"+o:a?"/actions/custom/"+e+"/"+n+"/"+o:"/actions/custom/"+e+"/"+o},he=function(t,a,r,o,i){i=i||{};var s=r&&r.component,c=r&&r.propViewer,d=i.needSObject,l=i.isStandard;return{builderProps:function(){var r=[],n=A(a,"attr"),i=d&&(n("sobject")||"global"),u=I.makeLabelFromId(o),f=n("sfdcactionname"),p=me(o,{needSObject:d,isStandard:l,sobject:i}),m=(f||l)&&me(o,{needSObject:d,isStandard:l,sobject:i,actionName:f}),h=function(e){return function(){b.removeAllAttrsExcept(a,["actionname","datasource","type"].concat(e)),s.save().rebuildProps(c)}};if(d&&r.push({id:"sobject",label:"SObject",type:"combobox",defaultValue:"Global",source:function(){return fe("/actions/custom/"+o,t).then(function(e){return v.map(e,function(e,t){return{label:t,value:t}})})},onChange:h(["sobject"])}),l||r.push({id:"sfdcactionname",label:u+" action",type:"combobox",source:function(){return fe(p,t).then(function(e){return v.map(e.actions,function(e){return{label:e.label,value:e.name}})})},onChange:h(["sfdcactionname","sobject"])}),m){var g=e.sfdc.api.getCachedResult({type:"GET",url:m,dataSource:t});!g&&m?fe(m,t).then(function(){s.rebuildProps(c)}):function(e,t,a,r){var n,o=r.children("inputs");if(o.length&&(n=o.children()),n&&n.length){var i=!1;v.each(n,function(e,a){0===t.filter(function(e){return e.name===v(a).attr("name")}).length&&(a.remove(),i=!0)}),i&&a.save()}v.each(t,function(t,i){var s=i.name,c=n?n.filter('[name="'+s+'"]'):[],d=c.length?c.attr("value"):null,l=(i.type||"TEXT").toLowerCase();"sobject"===l&&i.sobjectType&&(l="TEXT");var u={isStateless:!0,value:d,label:i.label,required:i.required,type:l.toLowerCase(),helptext:i.description,onChange:function(e){var t=!!o&&o.children('[name="'+s+'"]');e||!1===e||0===e?(t&&t.length||(t=F("<input/>").attr({name:s,displaytype:l}),(!o||o&&!o.length)&&(o=F("<inputs/>").appendTo(r)),t.appendTo(o)),t.attr("value",e)):t.remove(),a.save()}};"picklist"!==l&&"combobox"!==l||(u.picklistEntries=i.picklistValues),e.push(u)})}(r,g.inputs,s,a)}return r},runtimeExecution:function(t,a,r){r=r||{};var o=function(e){var t;return e&&e.length?(t=e[0].outputValues)&&t.output&&t.output.attributes?t.output:t:null},i=function(e,t,a){return"Error running "+e+" action"+(t?" "+t:"")+(a?(a.statusCode?": "+a.statusCode:"")+(a.message?': "'+a.message+'"':""):"")};return function(s,c,d){var l,u=s.attr("sfdcactionname")||a,f=s.attr("sobject")||"global",p=v.Deferred(),m={},h=!0,g=v.extend({},r,{sobject:f,actionName:u});if(s.children("inputs").children().each(function(){var e=A(v(this),"attr"),t=e("name"),a=e("value"),r=e("displaytype"),o=b.getContextToUse(c,d);if(!t)return p.reject({$CurrentAction:{error:'Invalid parameter name for Salesforce Action "'+u+'"'}}),h=!1,!1;a=b.mergeAsDataInContext(a,o),r.toUpperCase()===n.BOOLEAN&&(a="true"===a),m[t]=a}),!h)return p.promise();c&&c.button&&c.button.startProcessing();var y={inputs:[m]},S=me(a,g);return e.sfdc.api.makeRequest({type:"POST",url:S,dataSource:t,data:y,crossDomain:!0,success:function(e){l=o(e),p.resolve({$PreviousAction:{result:l}})},error:function(r){var n,s=b.parseAsJSONIfString(r.responseJSON);if(s&&s.length){var d=s[0];if(d.errors&&d.errors.length){var f=d.errors[0];"apex"===a&&"INVALID_INPUT"===f.statusCode?(n=i(a,u,f)+". Attempting to run action one more time without the invalid input parameter.",pe(n,c),fe(S,t,"GET").then(function(r){var s={};(r=b.parseAsJSONIfString(r)).inputs&&r.inputs.length&&v.each(r.inputs,function(e,t){for(var a in m)a===t.name&&(s[a]=m[a])});var d={inputs:[s]};e.sfdc.api.makeRequest({type:"POST",url:S,dataSource:t,data:d,crossDomain:!0,success:function(e){l=o(e),p.resolve({$PreviousAction:{result:l}})},error:function(e){var t,r=b.parseAsJSONIfString(e.responseJSON)[0];r.errors&&r.errors.length&&(t=r.errors[0]),n=i(a,u,t),pe(n,c);var o=t.message||"Error running custom Apex action "+u;p.reject({$CurrentAction:{error:o}})}})},function(){p.reject({$CurrentAction:{error:"Error getting updated inputs for custom Apex action"}})})):(n=i(a,u&&u!==a?u:null,f),pe(n,c),p.reject({$CurrentAction:{error:f.message}}))}else pe(n="Error running "+a+" action",c),p.reject({$CurrentAction:{error:"Unknown error with custom Apex action"}})}}}).always(function(){c&&c.button&&c.button.stopProcessing()}),p.promise()}}(t,o,i),label:i.label||I.makeLabelFromId(o),name:o}},ge=function(e){return function(t,a,r,n){var o=t.attr("workitemid"),i=t.attr("comments"),s=t.attr("nextapproverid"),c=b.getContextToUse(a,r),d={actionType:e,workItemId:b.mergeAsDataInContext(o,c),comments:b.mergeAsDataInContext(i,c)};return"Removed"!==e&&s&&(d.nextApproverId=b.mergeAsDataInContext(s,c)),n.authenticate().then(function(){return ee(n).approvalsProcessWorkItem(JSON.stringify(d))}).catch(function(e){return pe(e,a),b.reject({$CurrentAction:{error:e}})})}},ye=function(e,t,a,r){var n=b.getContextToUse(t,a),o=b.mergeAsDataInContext(e.attr("recordid"),n);if(!o){return pe("You must provide a valid record Id.",t),b.reject({$CurrentAction:{error:"You must provide a valid record Id."}})}return r.authenticate().then(function(){return ee(r).approvalsUnlockRecord(o)}).catch(function(e){return pe(e,t),b.reject({$CurrentAction:{error:e}})})},ve=function(e,t){return b.parseAsJSONIfString(e.getCacheProperty(t,"sessionStorage"))||{}},be=function(e){var t={};return v.each(e,function(e,a){t[a]=e}),t},Se={getMapOfPicklistValuesToEntries:function(e){if(!e)return{};var t=e.metadata&&e.metadata.picklistEntries||e.picklistEntries,a={};return v.each(t,function(e,t){a[t.value]=t}),a},getCurrentlyCachedFieldsMap:function(e,t){var a=e.getCachedEntityMetadata(t);return a?a.getFieldsMap():{}},getRecordTypeMetadata:function(e,t,a){var r=this,n=e._decompressedRecordTypeMetadata;if(n||(n=e._decompressedRecordTypeMetadata={}),n[a])return n[a];var o=ve(e,"compressedRecordTypeMetadata."+a);if(b.size(o)&&3===o.length){var i=o[0];if(!Ne({modstamp:o[1],__uid:o[2]},e)){var s=be(ve(e,"picklistToIndexMapMetadata.picklist")),c=be(ve(e,"picklistToIndexMapMetadata.value")),d=r.getCurrentlyCachedFieldsMap(e,t),l=b.isUndefined,u=n[a]={};return v.each(i,function(e,t){var a=s[t[0]],n=r.getMapOfPicklistValuesToEntries(d[a]),o=t[2];b.size(n)&&!l(a)&&d[a]&&(u[a]=v.map(t[1],function(e){var t=c[e];if(!l(t)&&(!n||n[t]&&n[t].active))return{value:t,label:n[t]&&n[t].label||t,defaultValue:e===o}}))}),u}}},storeRecordTypeMetadata:function(e,t,a){var r=a;Fe(r);var n=ve(e,"picklistToIndexMapMetadata"),o=n.value||{},i=n.picklist||{},s=Object.keys(o).length,c=Object.keys(i).length,d=[],l=b.isUndefined,u=[d,r.modstamp,r.__uid];v.each(r.metadata,function(e,t){var a=[],r=[],n=i[e];d.push(r),l(n)&&(n=i[e]=c,c++),r.push(n,a),v.each(t,function(e,t){var n=b.decodeHTML(t.value),i=o[n];l(i)&&(i=o[n]=s,s++),a.push(i),t.defaultValue&&r.push(i)})}),this.safeUpdateCache(e,"picklistToIndexMapMetadata","picklist",i),this.safeUpdateCache(e,"picklistToIndexMapMetadata","value",o),this.safeUpdateCache(e,"compressedRecordTypeMetadata",r.id,u)},persistCache:function(e){e.persistBatchCache("sessionStorage")},safeUpdateCache:function(e,t,a,r){var n=e.getCacheProperty(t,"sessionStorage")||{};n[a]=r,e.batchCacheProperty(t,n,"sessionStorage")},clear:function(e){delete e._decompressedRecordTypeMetadata,e.clearPropertiesCache()}};var Ce=function(e,t,a){return b.isApiEnabled()&&!a[g]&&t&&t.length?v.when.all(v.map(t,function(t){var r=Se.getRecordTypeMetadata(a,e,t);return r?{metadata:r,id:t}:ue(a,e,t).then(function(r){var n={metadata:r,id:t};return Se.storeRecordTypeMetadata(a,e,n),{metadata:Se.getRecordTypeMetadata(a,e,t),id:t}})})).then(function(e){Se.persistCache(a);var t={};return v.each(e,function(e,a){t[a.id]=a.metadata}),t}).catch(function(){}):b.resolve()};function Ie(e){var t=b.runningTests()?null:P[e];return t||((t=b.sessionStorage(e))?(t=JSON.parse(t),P[e]=t,t):null)}function Re(e,t){P[e]=t,t&&!t.__isFailure&&b.sessionStorage(e,JSON.stringify(t))}function Ne(t,a){var r=t.__uid,n=r===Te()||r===function(e){if(e){var t=e.authentication,a=!!t&&t.responseBody;return a||(a=t.responseBody=e.getStoredAuthData()),a?a.access_token:void 0}}(a),o=!t.modstamp||e.page.modstamp&&t.modstamp<e.page.modstamp,i=a&&a._metadataCacheVersion&&a._metadataCacheVersion>t.modstamp;return!n||o||i}function Te(){return t||(t=function(e){var t,a,r=0;if(0===e.length)return r;for(t=0,a=e.length;t<a;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return r}(te().sessionId)),t}function Fe(t,a){if(!t)return!1;var r=(new Date).getTime();r<e.page.modstamp&&(r=e.page.modstamp),t.modstamp=r,t.__uid=Te()||b.grab(a,"authentication","responseBody","access_token")}function Ae(t,a,r,n){var o=n&&n.dataSource||e.dataSource.get(s);return Ce(t,r,o).then(function(e){if(e){var t={},n=[];return v.each(r,function(r,o){var i=e[o]&&e[o][a];i&&v.each(i,function(e,a){t[a.value]||(n.push(a),t[a.value]=!0)})}),n}})}function we(e,t,a,r){var n,o=Se.getRecordTypeMetadata(r,a,t);if(o)return(n=o[e.id])?C(n):e.metadata?e.metadata.picklistEntries:e.picklistEntries}function je(e){var t=Me(e);return t||Ee(e),(t=Me(e))&&t.recordTypeId}function Me(e){return e._defaultRecordType||Ee(e),e._defaultRecordType}function Ee(e,t){var a,r,n=[];if(t||(t=v.map(e.conditions,function(e){if(!e.inactive)return e})),Pe(e)&&v.each(e.recordTypeInfos,function(){if(this.isDefaultRecordTypeMapping&&!this.isMaster)return a=this.recordTypeId,!1}),e.createable&&t&&v.each(t,function(e,t){!t.inactive&&t.field&&"RecordTypeId"===t.field&&t.value&&"null"!=t.value&&t.value.length>=15&&(a=t.value,n.unshift(e))}),a){var o=a.substring(0,15);v.each(e.recordTypeInfos,function(){if(this.recordTypeId.substring(0,15)===o)return r=this,a=this.recordTypeId,!1})}return e._defaultRecordType=r,n.length&&v.each(n,function(){t.splice(this,1)}),r}function Pe(e){return e.recordTypeInfos&&e.recordTypeInfos.length>1}function _e(e){var t=e.metadata||e,a=t&&t.picklistEntries;return!!(t.overrideMetadata&&a&&a.length&&t.customPicklistEntriesProvided)}function xe(e,t){var a=e.displaytype||e.metadata&&e.metadata.displaytype;return Pe(t)&&b.endsWith(a,f)&&!_e(e)}function ke(t,a,r,n,o){o||(o={});var i=e.ui.getFieldRenderer(t),s=r.model,c=r.row,d=s.getDataSource(),u=r.row&&(c.RecordTypeId||c.RecordType&&c.RecordType.Id),f=!!o.picklistEntries,p=Pe(s)&&u,m=_e(r);if(f||d[g]||m||!p||function(e,t,a){var r=Se.getRecordTypeMetadata(e,t,a);return!(!r||!b.size(r))}(s.dataSource,s.objectName,u))return i[a](r,n,o);e.ui.fieldRenderers[l].read(r,e.$L("loading")),G(r).then(function(t){r.render({picklistEntries:t}),e.events.publish("salesforce.async.field.rendered",[r])}).catch(function(){r.render()})}function Oe(e){return{read:function(t,a,r){return ke(e,"read",t,a,r)},readonly:function(t,a,r){return ke(e,"readonly",t,a,r)},edit:function(t,a,r){return ke(e,"edit",t,a,r)}}}function Le(e){var t=v.Deferred(),a='<?xml version="1.0" encoding="utf-8"?><env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><env:Header><urn:SessionHeader xmlns:urn="http://soap.sforce.com/2006/04/metadata"><urn:sessionId>'+sforce.connection.sessionId+"</urn:sessionId></urn:SessionHeader></env:Header><env:Body>"+e.body+"</env:Body></env:Envelope>";return e.dataSource.name!==s?I.deferrable():(v.ajax({type:"POST",url:"/services/Soap/m/40.0",beforeSend:function(e){e.setRequestHeader("SOAPAction",'""'),e.setRequestHeader("Content-Type","text/xml")},data:a}).done(function(e,a,r){var n="",o=b.makeXMLDoc(r.responseText),i=o.find("errors"),s=o.find("result"),c={};i.length&&v.each(i,function(){n+=v(this).children("message").text()+"\n"}),n?t.reject(n):(v.each(s.children(),function(e,t){t=v(t),c[t.prop("tagName")]=t.text()}),t.resolve(c))}).fail(function(e,a,r){t.reject(r.status)}),t.promise())}new e.dataSource.DataSourceType({name:s,prefillMetadataForObject:function(e){X(e.data)},getNameField:ce,getIdField:de,getIdFieldForChildRelationship:function(){return"Id"},getKeyPrefix:function(e,t){return t.keyPrefix},getValueKeyPrefix:function(e){return e.substring(0,3)},getRowId:function(e,t){return t.getFieldValue(e,"Id",!0)},getRowName:function(e,t){return t.getFieldValue(e,ce(t.objectName),!0)},getValidPicklistEntries:G,getValidPicklistEntriesSync:function(e){var t=e.row,a=e.model.getDataSource(),r=e.model.objectName,n=t&&(t.RecordTypeId||t.RecordType&&t.RecordType.Id);return W(e,_e(e)?e.metadata.picklistEntries:we(e,n,r,a)||e.metadata.picklistEntries)},save:function(e,t){var a=t.dataSource,r=a.getCacheProperty(p);return r||(r=m,a.setPersistentCacheProperty(p,r)),a.authenticate().then(function(){return ee(a).save(le(e,r)).then(function(e){return e},function(t){if(t&&t.indexOf("Invalid Skuid Save request - could not deserialize JSON into valid Save Request")>-1){var n=r>=2?1:2;return ee(a).save(le(e,n)).then(function(e){return a.setPersistentCacheProperty(p,n),e})}return t})})},makeMetadataApiRequest:Le,checkMetadataApiAccess:function(e){return ee(e).checkMetadataApiAccess()},addRemoteSiteSetting:function(e){var t=e.dataSource,a=e.url,r=e.name||a.substring(a.indexOf("://")+3).replace(/[\W]+/g,""),n='<createMetadata><metadata xsi:type="RemoteSiteSetting"><fullName>'+(r.length>40?r.substring(0,40):r)+"</fullName><description>"+e.description+"</description><disableProtocolSecurity>false</disableProtocolSecurity><isActive>true</isActive><url>"+a+"</url></metadata></createMetadata>";return t.name!==s?I.deferrable():Le({dataSource:t,body:n})},fieldRenderers:function(){return{PICKLIST:Oe(f),MULTIPICKLIST:Oe(d)}},onSelectEntity:function(e,t,a,r){var n=e,o=r.getCachedEntityMetadata(n).getField("RecordTypeId"),i=a.state.children("fields").empty();o&&i.append(F('<field id="RecordTypeId"/>'))},load:function(t,a){var r,n=a.dataSource;return n.authenticate().then(function(){var e,a=["conditionLogic","doQuery","forView","groupByMethod","havingLogic","id","objectName","orderByClause","offsetPageNumber","offsetPageSize","offsetSize","queryAllRows","recordsLimit","type"],r=v.map(t,function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&v.inArray(r,a)>-1&&(t[r]=e[r]);return v.each(["fields","groupByFields"],function(a,r){var n,o=e[r];o&&o.length&&(n=t[r]=[],v.each(o,function(e,t){var a;t.uiOnly?a=t:"childRelationship"===t.type?(a={id:t.id,type:t.type},v.each(["recordsLimit","orderByClause","subConditionLogic"],function(e,r){t.hasOwnProperty(r)&&null!==t[r]&&void 0!==t[r]&&(a[r]=t[r])}),t.subConditions&&(a.subConditions=[],t.subConditions.length&&v.each(t.subConditions,function(e,t){var r={};for(var n in t)t.hasOwnProperty(n)&&null!==t[n]&&void 0!==t[n]&&(r[n]=t[n]);a.subConditions.push(r)})),t.subFields&&(a.subFields=[],t.subFields.length&&v.each(t.subFields,function(e,r){var n={id:r.id};void 0!==t.query&&null!==t.query&&(n.query=n.query),a.subFields.push(n)}))):(a={id:t.id},v.each(["name","function","query"],function(e,r){t.hasOwnProperty(r)&&null!==t[r]&&(a[r]=t[r])})),n.push(a)}))}),v.each(["conditions","havings"],function(a,r){var n,o=e[r];o&&o.length&&(n=t[r]=[],v.each(o,function(e,t){var a=v.extend({},t);for(var r in a)null===a[r]&&delete a[r];n.push(a)}))}),t}),o=function(e,t,a){var r,n;if(!a._metadataCacheVersion||0===a._metadataCacheVersion){for(r=0;r<t.length;r++)if(!t[r].hasMetadataLoaded())return!1;return!0}for(r=0;r<e.length;r++){var o=e[r],i=t[r],s={};if(!i.hasMetadataLoaded()){if(!(a.entityMetadataCache[o.objectName]&&a.entityMetadataCache[o.objectName]._m&&a.entityMetadataCache[o.objectName]._m.fields))return!1;var c=a.entityMetadataCache[o.objectName]._m.fields;for(v.each(c,function(e,t){t.rel&&t.referenceTo&&(s[t.rel]={fieldFrom:t.id,entityAssociated:t.referenceTo[0].o?t.referenceTo[0].o:t.referenceTo[0].objectname}),s[t.id]=c[e]}),n=0;n<o.fields.length;n++){var d=o.fields[n];if(-1!==d.id.indexOf(".")){var l=$(d.id),u=a.entityMetadataCache[o.objectName],f=u&&l&&u.getField&&u.getField(l);if(f){var p=f.referenceTo;if(p&&1===p.length?u=a&&a.getCachedEntityMetadata(p[0].objectName||p[0].o):p&&p.length>1&&(u=a&&a.getCachedEntityMetadata("Name")),!u)return!1}}else if(!s[d.id])return!1}i.setMetadataHasLoaded()}}return!0}(r,t,n);return e=o?{operationModels:r,options:{excludeMetadata:o}}:r,ee(n).load(e)}).then(function(e){var t;if(v.isArray(e))return e;if(e&&e.models)return(t=e.metadata)&&b.size(t)&&v.each(t,function(e,t){n.cacheEntityMetadata(e,t)}),e.models;throw"Invalid Response Format"}).then(function(t){return r=t,function(t,a){var r,n={};return v.each(t,function(t,a){if(!a.data||!a.data.length){var r=e.$M(a.id);if(r&&r.createRowIfNoneFound||a.createRowIfNoneFound){var o=je(a);o&&(n[a.objectName]||(n[a.objectName]={}),n[a.objectName][o]=!0)}}}),r=v.map(n,function(e,t){var r=v.map(e,function(e,t){return t});return Ce(t,r,a)}),v.when.all(r)}(t,n)}).then(function(){return r})},getUserInfo:function(t){var a,r=t.authentication,n=r&&r.responseBody;return t.name===s&&b.inPlatform([c,o])?j(te()):(n&&(a=n.id),n&&a?(a=(a=a.replace("https://","")).substring(a.indexOf("/")),e.ajax.proxy(t.createHTTPRequest({url:b.combineUrls(t.serviceUrl,a),method:"GET",contentType:"application/json"})).then(function(e){var t=b.parseAsJSONIfString(e.body);return{email:t.email,firstName:t.first_name,lastName:t.last_name,name:t.display_name,userId:t.user_id,userName:t.username}})):j())},getUserInfoProperties:function(){return[{label:"First Name",value:"firstname"},{label:"Last Name",value:"lastname"},{label:"Email",value:"email"},{label:"Full Name",value:"name"},{label:"User Id",value:"userid",defaultValue:!0},{label:"User Name",value:"username"}]},getActions:function(e){return fe(me("",{isStandard:!0}),e).then(function(e){return function(t,a,r){var n,o,i=(e&&e.actions||[]).filter(function(e){return"submit"!=e.name||(n=he(t,a,r,e.name,{isStandard:!0,label:e.label}),!1)}).map(function(e){return he(t,a,r,e.name,{isStandard:!0,label:e.label})});return[{label:"Standard",value:"-",disabled:!0}].concat(i).concat([{label:"",value:"-",disabled:!0},{label:"Custom",value:"-",disabled:!0},he(t,a,r,"apex"),he(t,a,r,"flow"),he(t,a,r,"emailAlert",{needSObject:!0}),he(t,a,r,"quickAction",{needSObject:!0}),{label:"",value:"-",disabled:!0},{label:"Approvals",value:"-",disabled:!0},n]).concat([{name:"approvals-approve",label:"Approve",builderProps:(o=[{label:"Work Item Id",id:"workitemid",type:"template",location:"attribute",displayAs:"input",helptext:"The Id of the Salesforce ProcessInstanceWorkItem on which the action is being performed."},{label:"Comments",id:"comments",type:"template",location:"attribute",displayAs:"input",helptext:"(Optional) Adds comments to the approval history for this action."}]).concat([{label:"Next Approver Id",id:"nextapproverid",type:"template",location:"attribute",displayAs:"input",helptext:"(Optional) The user Id of the next approver. This property only applies if the next approval step allows users to manually choose a next approver."}]),runtimeExecution:ge("Approve")},{name:"approvals-reject",label:"Reject",builderProps:o,runtimeExecution:ge("Reject")},{name:"approvals-recall",label:"Recall",builderProps:o,runtimeExecution:ge("Removed")},{name:"approvals-unlock",label:"Unlock Record",builderProps:[{label:"Record Id",id:"recordid",type:"template",location:"attribute",displayAs:"input",helptext:"Id of the record to unlock."}],runtimeExecution:ye}])}})},getEntityList:function(e){var t=b.sObjectList,a=e.dataSource;return a.name===s&&t?v.Deferred().resolve(t).promise():a.authenticate().then(function(){return ee(a).getEntityList()})},handleDefaultReferenceFieldValue:function(t,a,n,o,i){var c=o.rel,d=a.value,l=b.getNameField(o.ref),u=a.nameFieldValue||!1;if(u||"RecordType"!==o.ref||v.each(n.recordTypeInfos,function(){if(this.recordTypeId===d)return u=this.name,!1}),!u){if(a.model){var f=e.$M(a.model),p=f.getDataSourceType().name===s;f&&f.data.length&&v.each(f.data,function(e,t){if(d===f.getRowId(t)||p&&d===t.Id15){var a=f.getRecordForRow(t);return u=a?a.get():t,!1}})}if(!u){var m=b.getFieldReference(a.field,o);v.each(i,function(e,t){t===a||t.field!==m||t.inactive||!t.value||a.operator&&"="!==a.operator||(u=t.value)})}}var h,g={};u&&("object"===(void 0===u?"undefined":r(u))?h=u:(h={})[l]=u,g[c]=h);g[a.field]=d,n.updateRow(t,g)},coerceCreateRow:function(e,t,a){var r,n,o=t,i=e.row(),s={};i.Id=e.id(),Ee(t,a),r=je(t),n=Me(t);var c=b.grab(t,"fieldsMap","RecordTypeId");c&&c.overrideMetadata&&!b.isUndefined(c.defaultValue)||r&&(s.RecordTypeId=r,n&&(s.RecordType={Name:n.name}),o.updateRow(i,s,{preventSetActive:!0}))},coerceUpdateRows:function(e,t,a){a.preventTrackChanges||"Opportunity"===e.objectName&&v.each(t,function(t,a){var r=e.changes[t],n=r&&r.StageName,o=a.StageName,i=e.getField("StageName"),s=i&&i.fieldMappings;if(o&&s){var c=e.getField("Probability"),d=e.getField("ForecastCategoryName"),l=e.getField("ForecastCategory");if(n){var u=!1,f=!1,p=!1;v.each(s,function(e,t){t.MasterLabel===n&&("Probability"in r&&r.Probability!==t.DefaultProbability&&(u=!0),"ForecastCategoryName"in r&&r.ForecastCategoryName!==t.ForecastCategoryName&&(f=!0),"ForecastCategory"in r&&r.ForecastCategory!==t.ForecastCategoryName&&(p=!0))}),u&&f&&p||v.each(s,function(e,t){t.MasterLabel===o&&(c&&!u&&(a.Probability=t.DefaultProbability),d&&!f&&(a.ForecastCategoryName=t.ForecastCategoryName),l&&!p&&(a.ForecastCategory=t.ForecastCategoryName))})}else r?v.each(s,function(e,t){t.MasterLabel===o&&(c&&!r.Probability&&(a.Probability=t.DefaultProbability),d&&!r.ForecastCategoryName&&(a.ForecastCategoryName=t.ForecastCategoryName),l&&!r.ForecastCategory&&(a.ForecastCategory=t.ForecastCategoryName))}):v.each(s,function(e,t){t.MasterLabel===o&&(c&&(a.Probability=t.DefaultProbability),d&&(a.ForecastCategoryName=t.ForecastCategoryName),l&&(a.ForecastCategory=t.ForecastCategoryName))})}})},coerceMassUpdate:function(e){"Opportunity"===e.objectName&&(e.getField("StageName")&&v.each(["ForecastCategory","ForecastCategoryName","Probability"],function(t,a){var r=e.getField(a);r&&(r.needsEditor=!0)}))},coerceDefaultValue:function(e,t){var a,r,n,o=e.displaytype,i=je(t);return xe(e,t)&&(n=we(e,i,t.objectName,t.getDataSource()))&&n.length&&(v.each(n,function(e,t){if(t.defaultValue&&"false"!==t.defaultValue)return a=t.value,!1}),a&&0!==a&&"null"!=a&&(o===u&&(a=!0===a||"true"===a),r=a)),r},determineIfCreateRowNeedsMetadata:function(e){for(var t=e.fields,a=0;a<t.length;a++)if(xe(t[a],e))return!0},loadDefaultValueMetadata:function(e,t){if(xe(e,t)){var a=je(t);return this.getMetadataForRecordTypes(t.objectName,[a],t.dataSource)}return v.when()},getReferenceFieldNameFromRelationshipField:$,getReferenceFieldRelationshipName:K,isRelationshipField:function(e){return b.contains(e,".")},getReferenceFieldRelatedData:function(t,a,r,n,o){var i,s=t.id,c=K(s);if(void 0===o[c]){if(v.each(n.data,function(){if(this[s]&&(this[s]===a||this[s].length&&this[s].length>=15&&this[s].substr(0,15)===a)&&n.getFieldValue(this,c))return i=n.getFieldValue(this,c,!0),!1}),!i){var d=t.referenceTo,l=[],u=[];d&&d.length&&v.each(d,function(){l.push(this.keyPrefix),u.push(this.objectName)}),l.length>1&&a.length>=15&&(l=[a.substring(0,3)]),v.each(l,function(t,r){v.each(e.model.getModelsByKeyPrefix(r)||[],function(){var e=this;if(e.data&&e.data.forEach(function(t){if(e.getRowId(t)===a||t.Id15&&t.Id15===a){var r=e.getRecordForRow(t);return i=r?r.get():t,!1}}),i)return!1})})}if(!i){var f=n.dataSource&&n.dataSource.name;v.each(e.model.getModelsByDataSource(f),function(){var e=this,t=[];if(e!==n)return v.each(this.fields,function(){var e=this,a=e.referenceTo;a&&a.length&&v.each(u,function(r,n){v.each(a,function(){n===this.objectName&&t.push(e)})})}),t.length&&v.each(e.getRows(),function(){var r=this;if(v.each(t,function(){if(e.getFieldValue(r,this.id,!0)===a)return i=e.getFieldValue(r,this.rel,!0),!1}),i)return!1}),!i&&void 0})}return i}},search:function(e){var t=e.dataSource;return delete e.dataSource,ee(t).doSearch(e).then(function(a){return a.results&&a.results.forEach(function(t,a){t.objectMapKey=e.returning[a].objectMapKey,t.modelName=e.returning[a].modelName}),e.dataSource=t,a.request=e,a})},buildEntityMetadataRequest:function(e){var t=e.targetEntity;return!t&&e.model&&e.model.attr&&(t=e.model.attr("sobject")),{objectName:t}},clientSideCacheIsEnabled:function(e){return!(!e._metadataCacheVersion||0==e._metadataCacheVersion||null==e._metadataCacheVersion)},dataSourceProvidesLanguageDetails:function(){return te().language},getEntityMetadataLoadingMessageFromBreadcrumb:function(e){return"Loading metadata for object "+e.endsobject+"..."},getEntityMetadataCacheKey:function(e){return e.objectName},getEntityMetadata:function(e){var t=v.Deferred(),a=e.entities,r=e.dataSource,n=e.ignoreMetadataOverrides?"true":"false";return a?r.authenticate().then(function(){var e=[];v.each(a,function(t,a){var o=v.Deferred(),i=N(a)?a:a.objectName,s={sObjectName:i,loadChildRelationships:"true",loadPicklistValues:"false",ignoreMetadataOverrides:n};if(e.push(o.promise()),!i)return o.reject("Error: no Salesforce Object Name was specified for Model."),!0;a&&a.fields&&a.fields.length&&(s.fieldsToLoad=a.fields.join(","),v.isPlainObject(a.fields[0])&&(s.fieldsToLoad=a.fields.map(function(e){return e.id}).join(","))),ee(r).getModelMetadata(s).then(function(e){e?e instanceof Array&&e.length?o.resolve(v.map(e,function(e){return X(e),e})):(X(e),o.resolve(e)):o.resolve(e)},function(e){o.reject("There was an error retrieving metadata for object: "+i+": "+e)})}),v.when.all(e).then(function(e){t.resolve(e)},function(e){t.reject(e&&e.length?e.join(","):"")})},function(e){t.reject("Unable to authenticate to Salesforce. Metadata could not be retrieved. "+e)}):t.reject("No SObject provided."),t.promise()},getGroupingMethodsPicklistEntries:function(){return[{value:"simple",label:"Simple"},{value:"rollup",label:"Rollup"}]},getImageSources:function(t){var r={attachment:{label:"Attachment",needsRecordContext:!0,needsFieldContext:!0,relatedObjectName:"skuid__Image__c",automaticFieldMappings:{Attachment:!0,skuid__Image__c:!0},getSrc:ne}};return t&&t.name===s&&(r.staticresource={label:"Static Resource",builderProps:function(t,r,n){var o=n.additionalOnRefresh,i=n.additionalOnRebuildAndRefresh,s=n.prefix||"",c=[],d=s+"resource",l=s+"resourceContentType",u=s+"path",f={},p=!0;return f[d]="{{#NamespacePrefix}}{{{NamespacePrefix}}}__{{/NamespacePrefix}}{{{Name}}}",f[l]="{{{ContentType}}}",r.attr(l)&&(p=r.attr(l)===a.MIME_TYPES.ZIP),c.push(e.platform.builder.getStaticResourceProperty({id:d,valueTemplates:f,onChange:function(){r.attr(u)&&(r.removeAttr(u),t.save()),t.refresh().rebuildProps(),i&&i()}})),r.attr(d)&&p&&c.push(e.platform.builder.getNestedPathProperty({id:u,state:r,nameProperty:d,namespaceProperty:d,onChange:function(){t.refresh(),o&&o()}})),c},getSrc:function(e){var t,a,r=v.Deferred(),n=e.prefix||"",o=e.xmlDef&&e.xmlDef.attr(n+"resource"),i=e.xmlDef&&e.xmlDef.attr(n+"path"),s=e.context,c=e.mergeSettings;return i&&(i=b.mergeAsTextInContext(i,s,c)),o&&(o=b.mergeAsTextInContext(o,s,c))&&2===(a=o.split("__")).length&&(t=a[0],o=a[1]),o?r.resolve(b.getStaticResourceUrl(o,t,i)):r.reject("No Resource Provided"),r.promise()}}),r},getMetadataCacheVersion:function(){return k},getReferenceHandler:function(){return{getBaseReferenceProps:function(t){return[{id:"targetobjects",type:"sobject",label:"SObject Type",dataSourceName:e.dataSource.getDataSourceFromXML(t.state).name}]},getOverrideBatchProperties:function(){return[{type:"helptext",html:"Specify fields that will be added as related data. Any fields that are used in search or display templates will need to be added here."}]},getOverrideBatchNoItemsFunction:function(){return function(){return v("<div>").text("(Loading key field only.)")}},getOverrideBatchFieldChildrenFunction:function(e){return function(){return[{id:"batchfield",indent:1,linkedComponent:e,addtooltip:"Add New Batch Load Field",labelFunction:function(e){return e.attr("field")||"[No Field Selected]"},defaultStateFunction:function(){return F("<batchfield/>")},propsFunction:function(t){return[{id:"field",type:"field",label:"Field",sobject:e.state.attr("targetobjects"),dataSourceName:e.state.attr("datasource"),onChange:function(){t.refresh().rebuildProps()}}]}}]}},getMetadataHandler:function(t,a,r,n,o){var s,c=t.children("batchfields").first().children("batchfield"),d=t.attr("keyfield")||"Id",l=t.attr("targetobjects"),u=t.attr("ogdisplaytype"),f=t.attr("rel")||n+"__r";if(a.keyField=d,a.originalDisplayType=u,l&&(s=l.split(","),a.isNamePointing=s.length>1,(o||u&&u!==i)&&(a.relationshipName=a.rel=f),a.referenceTo=v.map(s,function(e){return{accessible:!0,objectName:e}}),a.ref=l),!o&&u&&u!==i){var p=e.dataSource.getDataSourceFromXML(t),m=new e.model.Model({dataSource:p});m.id="_ReferenceLabelModel_"+(new Date).getTime()+f,c&&c.length?m.fields=v.map(c,function(e){return{id:v(e).attr("field")}}):m.fields=[{id:d}],m.doQuery=!0,m.doClone=!1,m.objectName=l,m.initialize();var h=new e.model.Condition;h.name="__reference_batch",h.operator="in",m.addCondition(h),r.batchLabelModels||(r.batchLabelModels={}),r.batchLabelModels[n]=m}},getReferenceValue:function(e,t){return e[t.keyField||"Id"]},getRowFromReferenceValue:function(e,t,a){var r=e.getRows([{field:a.keyField||"Id",value:t}]);return r&&r.length?r[0]:{}},processReferenceLookupModel:function(e,t,a){e.objectName=a,"OwnerId"===t.id&&"Group"===a&&e.addCondition({field:"Type",value:"Queue",inactive:!1}),"recordtype"==a.toLowerCase()&&(e.rTypeFor=t.model.objectName,e.addCondition({field:"SObjectType",value:e.rTypeFor,inactive:!1,type:"fieldvalue"}))}}},getUploadMethods:function(){var t,a=65e4,r={id:"autorefreshmodels",type:"boolean",label:"Auto-refresh related Models on successful upload",defaultValue:!0,helptext:"If true, then upon successful file upload, Skuid will automatically attempt to find related Models that are displaying File data, and Skuid will cancel changes in these Models and then re-query them."};function n(e,t,r,n,o,i){e.size<a?function(e,t,a,r,n){var o=a.uploadMethod.dataSource;b.readFileAsBase64(e).then(function(i){var s,c,d,l,u,f=[],p={},m={},h={},g=t.model,y=t.row,b=t.options.xmlDef,S=b&&b.attr("owneridfield")||"",C=y&&g?g.getRowId(y):null,I=y&&S&&y[S]?y[S]:"";p.id="imageAttachmentUpload",p.type="Attachment",m.id="imageImageInsert",m.type="skuid__Image__c",h.id="updateObject",h.type=g.objectName,c=a.description?R(a.description,{row:y,model:g},{createFields:!1}):"",l=a.filename?R(a.filename,{row:y,model:g},{createFields:!1}):e.name,d=t.fieldValue,s=t.fileId,"field"===a.storeAs?s&&d?(m.id="imageImageUpdate",m.updates={},m.updates[d]={Name:l},p.deletes={},p.deletes[s]={Id:s},p.inserts={1:{ParentId:d,Body:i,Name:l,ContentType:e.type,Description:c}},f.push(p,m),u="AttachmentUpdate"):d?(m.id="imageImageUpdate",m.updates={},m.updates[d]={Name:l},p.inserts={1:{ParentId:d,Body:i,Name:l,ContentType:e.type,Description:c}},f.push(p,m),u="CreateAttachmentToImage"):(m.inserts={1:{}},p.inserts={2:{ParentId:"1",Body:i,Name:l,ContentType:e.type,Description:c}},h.updates={},h.updates[C]={},h.updates[C][t.fieldName]="1",f.push(m,p,h),u="CreateFileAndAttachment"):"record"===a.storeAs&&(p.inserts={1:{ParentId:C,Body:i,Name:l,ContentType:e.type,Description:c}},I&&(p.inserts[1].OwnerId=I),f.push(p),u="CreateAttachment"),r({fileName:l}),ee(o).save(JSON.stringify({operations:f,rollbackOnAnyError:!0})).then(function(e){var a,r,o,i,s,c=e.insertResults,d=t.fieldValue;"AttachmentUpdate"===u?(s=re(e,1,1,1)).success?(a=c[0].id,r=d):(i="Failure Updating Attachment",o=s.errors):"CreateAttachmentToImage"===u?(s=re(e,1,1,0)).success?(a=c[0].id,r=d):(i="Failure Creating Attachment",o=s.errors):"CreateAttachment"===u?(s=re(e,1,0,0)).success?a=c[0].id:(i="Failure Creating Attachment",o=s.errors):"CreateFileAndAttachment"===u&&((s=re(e,2,1,0)).success?(a=c[1].id,r=c[0].id):(i="Failure Creating File and Attachment",o=s.errors)),i&&o&&o.length&&(i+=": "+v.map(o,function(e){return e.message}).join(", ")),n({newFileId:a,newFieldValue:r,newFileName:l,message:i})},function(e){n({message:e&&e.error})})},function(e){n(e)})}(e,t,r,n,o):ie(e,t,r,n,o,i)}function o(e,t,a,r){var n=e.model.objectName,o=e.row.Id,i=this.dataSource,s=e.model.getFieldValue(e.row,t),c={id:"objdelete",updates:{},type:n},d={id:"imagedelete",deletes:{},type:"skuid__Image__c"},l=o;c.updates[l]={},c.updates[l][t]="",d.deletes[s]={},a(),ee(i).save(JSON.stringify({operations:[c,d]})).then(function(){r()},function(e){r({message:e})})}function i(t,a,r,n,o){var i=t.row.Id,c=a.attr("id");return this.dataSource.name===s?(e.page.runningOnForceSite?e.page.currentSiteUrl:"/")+"apex/UploadImage?id="+i+(r?"&objfield="+r:"")+"&elid="+c+(n?"&desc="+n:"")+(o?"&filename="+o:""):""}function c(){return this.dataSource.name===s}return t={record:{label:"In Attachment to Record",relatedObjectName:"Attachment",needsRecordContext:!0,forceStoreAsFileName:!0,upload:n,getSrc:ne,deleteFile:o,supportsIframeUpload:c,getIframeSrc:i,builderProps:[{id:"owneridfield",helpText:"If left blank, owner of record will be creator of attachment",type:"field",addFieldToModel:!0,label:"Custom Owner Id Field",modelprop:"model"}]},chatterfeed:{label:"In Chatter Feed Item",relatedObjectName:"ContentVersion",needsRecordContext:!0,upload:ie,builderProps:[{id:"feedtext",type:"text",label:"Feed Text"}]},field:{label:"In Field on Record",needsRecordContext:!0,needsFieldContext:!0,upload:n,getSrc:ne,deleteFile:o,supportsIframeUpload:c,getIframeSrc:i,getFileIdField:function(e){return e.substr(0,e.length-1)+"r"+".skuid__AttachmentId__c"},getFileNameField:function(e){return e.substr(0,e.length-1)+"r"+".Name"}},chatterfiles:{label:"In Chatter Files",relatedObjectName:"ContentVersion",upload:ie},contentdocument:{label:"In Content Document",relatedObjectName:"ContentVersion",upload:ie},contentdocumentwithrecord:{label:"In Content Document (with Record Context)",relatedObjectName:"ContentVersion",needsRecordContext:!0,upload:ie},staticresource:{label:"In Static Resource",canRunPostUploadSnippet:!0,upload:se,hideInBuilder:!0}},v.each(t,function(e,t){if(t.relatedObjectName){var a=t.builderProps;a||(a=t.builderProps=[]),a.push(r)}}),t},getDefaultFieldsForReferenceField:function(e,t,a){var r,n=t.referenceTo[0].objectName,o=[];return r=t.referenceTo.length<2?b.getFieldReference(e,t,a):b.getFieldRelationshipName(e,t)+".Name",o.push(r),"skuid__Image__c"===n&&o.push(b.getFieldRelationshipName(e,t)+".skuid__AttachmentId__c"),o},getNameFieldURLForReferenceField:function(t,a,r){var n,o,i=t.options.fieldXML,s=i&&i.attr("redirecttype")||"datasourcedefault",c=e.dataSource.DataSourceType.prototype.getNameFieldURLForReferenceField;return"datasourcedefault"!==s?c(t,a,r):L(t.model)&&a&&a.length?(o='<a href="',n=a.substring(0,3),V(t),J()?(o+=U(a,t.metadata.referenceTo.find(function(e){return e.keyPrefix===n}).objectName),q(t,a)):D()?(o+=b.getSafeRelativeUrl("/"+a),H(t,a)):z()?(o+=b.getSafeRelativeUrl("/"+a),function(t,a){B(t,function(){e.ui.openConsoleTabForField(t._GUID,t.model.id,a)})}(t,a)):o+=b.getSafeRelativeUrl("/"+a),o+='" tabindex="-1">'+r+"</a>"):void 0},getNameFieldURLForTextField:function(t,a,r){var n,o,i,s=t.metadata,c=t.model,d=r,l=t.row,u=c.getRowId(l),f=s&&"URL"===s.displaytype,p=J(),m=D(),h=z(),g=a;return V(t),!t.options.noLink&&!c.isSingleRow()&&L(c)&&b.userInfo.isAuthenticated&&(s&&s.nameField||["FirstName","LastName","Company"].includes(t.id))&&!c.isNewRow(l)&&-1===t.id.indexOf(".")?(g=d,d='<a href="',p?(d+=U(u,c.objectName),q(t,u)):m?(d+=b.getSafeRelativeUrl("/"+u),H(t,u)):h?(d+=b.getSafeRelativeUrl("/"+u),B(t,function(){e.ui.openConsoleTabForNameField(u,c.id)})):d+=b.getSafeRelativeUrl("/"+u),d+'">'+w(g)+"</a>"):f?(n=d&&M(d,"/"),i=w(g),o=w(d),n&&B(t,function(){p?window.$A.get("e.force:navigateToURL").setParams({url:g}).fire():m?sforce.one.navigateToURL(g):h&&e.ui.openConsoleTabForUrl(g,i)}),'<a href="'+i+'"'+(n?"":' target="blank"')+">"+o+"</a>"):void 0},coerceStartingPageSize:function(e){e.recordsLimit>2e3?e.offsetPageSize=2e3:e.offsetPageSize=e.recordsLimit||100},getModelProperties:function(t,a,r){var n=this,o=e.builder.core,i=t.state,c=function(){return(i.attr("datasource")||i.attr("service")||s)===s},d=o.getUnsavedChangesWarningProperty({component:t}),l=o.getCoreModelBasicProperties({component:t,propViewer:a}),u=[];return l.push({id:"sobject",type:"sobject",dataSourceTypeName:this.name,dataSourceName:i.attr("datasource")||i.attr("service"),label:"Salesforce Object Name",onChange:function(a,o){n.onSelectEntity(a,o,t,r),t.refresh(),e.mobile&&e.mobile.processResponsiveElements()}},o.getModelTypeProperty({component:t}),o.getModelQueryOnPageLoadProperty({component:t,propViewer:a})),c()&&"aggregate"!==i.attr("type")&&u.push({id:"doclone",type:"picklist",label:"Clone data returned by Model query",helptext:"Should all data returned by querying this Model be 'cloned', meaning that data in the Model will be marked as 'New' so that when the Model is saved, new records will be created, rather than updates made to existing records?",picklistEntries:[{label:"Yes, always",value:"yes"},{label:"Yes, if 'clone' and 'id' parameters are present in URL",value:""},{label:"No",value:"no"}],defaultValue:""}),u.push({id:"queryallrows",type:"boolean",label:"Query Deleted / Archived records",helptext:'For developers: adds the SOQL "ALL ROWS" clause to your query. If true, then deleted records and/or archived Tasks will be included in your Model\'s query --- by default, they are not.'},{id:"forview",type:"boolean",label:'Update Salesforce "Recently Viewed" info',helptext:"For developers: adds the SOQL \"FOR VIEW\" clause to your query. Use this if you want this Model to feed into Salesforce's tracking of Recently Viewed Items. When this Model's query is run, the LastViewedDate for all records in this Model will be updated, and new records will be added to the RecentlyViewed object. "}),c()?(e.offline.isEnabled()||u.push({id:"processonclient",type:"boolean",defaultValue:o.pageModel.getFieldValue(o.pageRow,"skuid__MasterPage__c")&&"true"===o.getMasterPageXML().attr("cachepage"),label:"Process Model client-side",onChange:function(){t.refresh().rebuildProps()},helptext:"If this page, or its master page, has Page Caching enabled, this is HIGHLY RECOMMENDED, unless you expect this Model's data to rarely change. Causes Skuid to construct this Model client-side in JavaScript rather than server-side, which prevents your Model metadata and data from being cached, which could result in stale / inaccurate metadata/data being presented to your users."}),"true"===i.attr("processonclient")&&l.push(o.getAsyncLoadProperty({component:t})),u.push({defaultValue:!1,id:"nativeuiautosync",type:"boolean",label:"Auto-sync with other Lightning Components",helptext:"If enabled, then when this Skuid Page is used in Lightning Experience or Salesforce1, Skuid will automatically update this Model's data when other Lightning Components are refreshed, and Skuid will automatically notify other components whenever this Model is saved."})):l.push(o.getAsyncLoadProperty({component:t})),l.push(o.getModelLimitProperty(),o.getModelOrderByProperty(),o.getCreateDefaultRowProperty()),d&&u.push(d),Array.prototype.push.apply(u,o.getModelLabelProperties()),[{name:"Basic",props:l},{name:"Advanced",props:u}]},processModelXMLExtensions:function(e,t){e.extensions={salesforce:{forView:"true"===t.attr("forview"),nativeUiAutoSync:"true"===t.attr("nativeuiautosync"),objectName:t.attr("sobject"),type:t.attr("type"),queryAllRows:"true"===t.attr("queryallrows")}}},isDataSourceNativeSalesforce:O,getMetadataForRecordTypes:Ce,getPicklistEntriesValidForRecordTypes:Ae,getAPIDescribeSObject:function(t){if(b.isApiEnabled()){var a="skuid_describeSObject_"+t,r=Ie(a),n=!1;if(r?(Ne(r)&&(n=!0),(!r.modstamp||r.modstamp<e.page.modstamp)&&(n=!0)):n=!0,n)try{Fe(r=sforce.connection.describeSObject(t)),Re(a,r)}catch(e){r=null}return r}return!1},getAPIDescribeLayout:function(t){if(b.isApiEnabled()){var a="skuid_describeLayout_"+t,r=Ie(a),n=!1;if(r?(Ne(r)&&(n=!0),(!r.modstamp||r.modstamp<e.page.modstamp)&&(n=!0)):n=!0,n)try{Fe(r=sforce.connection.describeLayout(t)),Re(a,r)}catch(e){r=null}return r}return!1},initialize:X,initializeDataSource:function(t){t.name===s&&S(o)&&!t.serviceUrl&&(t.serviceUrl="https://"+e.settings.site("host"))},properties:{composer:{supports:{childRelationships:!0},canFieldsBeSelected:function(e){return!!e.breadcrumb.endsobject||"Select an SObject for this Model"}},canAutoGenerateConditionsFromFields:!0,validConditionTypes:["fieldvalue","multiple","modelmerge","blank","param","userinfo","datasourceuserinfo","join"],canConditionsBeGrouped:!0,hasGlobalSearchEntities:!0,batchableEntityRequests:!0,serverSideModelMerge:!0,offline:{createConditionsForConflicts:function(t){return[new e.model.Condition({encloseValueInParens:!0,encloseValueInQuotes:!0,field:"Id",inactive:!1,operator:"in",state:"filterableon",type:"multiple",values:v.map(t.updates,function(e,t){return t})})]}}},_recordTypeCacheStorage:Se,_setMetadataCacheVersion:function(e){k=e}})}(skuid)}});